
  /* yBox Popup */
  function yBox(){let e=this;this.init=function(){let t=document.querySelectorAll(".yBox");for(let o=0;o<t.length;o++)t[o].addEventListener("click",function(t){t.preventDefault(),e.yBox("",this)});document.body.addEventListener("keyup",function(t){e.onKeyup(t)})},this.onKeyup=function(t){let o=document.querySelector(".yBoxImg");if(!o)return;let n=o.getAttribute("src"),r=document.querySelector(`.yBox[href="${n}"`);39===t.keyCode&&e.yBoxPrevItem(r),37===t.keyCode&&e.yBoxNextItem(r),27===t.keyCode&&e.closeYbox()},this.onYboxOpen=function(e){return e&&"function"==typeof e&&e()},this.onYboxClose=function(e){return e&&"function"==typeof e&&e()},this.onNextItemClick=function(e){return e&&"function"==typeof e&&e()},this.onPrevItemClick=function(e){return e&&"function"==typeof e&&e()},this.yBox=function(t,o){let n="",r=!0,i="",l="";void 0===o&&(r=!1),r&&(n=o.getAttribute("data-ybox-class")?o.getAttribute("data-ybox-class"):"",yBoxTitle=o.getAttribute("data-ybox-title")?o.getAttribute("data-ybox-title"):"",i=o.getAttribute("href")),l=document.createRange().createContextualFragment(`<div class="yBoxOverlay">\n                    <div class="yBoxFrame ${n}">\n                        <div class="insertYboxAjaxHere"></div>\n                        <button type="button" class="closeYbox" title="Close"></button>\n                    </div>\n                </div>`),document.addEventListener("click",function(t){"yBoxOverlay active"!=t.target.className&&"closeYbox"!=t.target.className||e.closeYbox()});let a=document.querySelector(".yBoxPlaceHolder"),c=document.querySelector(".insertYboxAjaxHere");if(document.querySelector(".yBoxFrame"))if(document.querySelector(".yBoxFrame.yBoxImgWrap")){if(a)a.parentNode.insertBefore(c,a),a.parentNode.removeChild(a);else{a=document.createElement("div"),a.classList.add("yBoxPlaceHolder");let e=document.querySelector(".yBoxImg");a.style.width=e?e.width:0,a.style.height=e?e.height:0}c.appendChild(a),e.insertYboxHtml(o,r,i,t,function(){e.onYboxOpen()})}else e.helpers.animate(c,"opacity",0,.2,function(){a&&a.parentNode&&(a.parentNode.removeChild(a),a.remove()),c.innerHTML="",e.insertYboxHtml(o,r,i,t,function(){e.onYboxOpen()}),e.helpers.animate(c,"opacity",1,.2)});else document.body.appendChild(l),e.insertYboxHtml(o,r,i,t,function(){setTimeout(function(){document.querySelector(".yBoxOverlay").classList.add("active")},200),e.onYboxOpen()})},this.insertYboxHtml=function(t,o,n,r,i){let l=document.querySelector(".yBoxFrame"),a=document.querySelector(".yBoxPlaceHolder"),c=document.querySelector(".insertYboxAjaxHere");if(o)if(t.classList.contains("yBox_iframe")){if(l.classList.add("yBoxIframeWrap"),n.toLowerCase().indexOf("youtube")>-1||n.toLowerCase().indexOf("youtu.be")>-1){let e=n.replace(/^[^v]+v.(.{11}).*/,"$1").replace("https://youtu.be/","").replace(/.*youtube.com\/embed\//,"");n=`https://www.youtube.com/embed/${e}?wmode=transparent&rel=0&autoplay=1`}c.innerHTML=`<iframe src="${n}"  frameborder="0" wmode="Opaque" allowfullscreen class="yBoxIframe"></iframe>`}else if(t.classList.contains("yBox_ajax")){let e=new XMLHttpRequest;e.onload=function(){e.status>=200&&e.status<300?(console.log("success!",e),c.innerHTML=e.response):(c.innerHTML="Oops - something went wrong :(",console.log("The request failed!"))},e.onerror=function(e){console.warn(e),c.innerHTML="Oops - something went wrong :("},e.open("GET",n),e.send()}else if(-1==n.indexOf("#")){l.classList.add("yBoxImgWrap"),a&&a.parentNode.removeChild(a);let o=document.querySelector(".yBoxImg");o?c.appendChild(document.createRange().createContextualFragment('<div class="yBoxLoaderWrap"><div class="yBoxLoader"></div></div>')):c.appendChild(document.createRange().createContextualFragment('<div style="text-align:center;"><div class="yBoxLoader"></div></div>'));let r=new Image;r.src=n,r.className="yBoxImg",r.onload=function(){var o="";yBoxTitle&&(o=`<span>${yBoxTitle}</span>`);let r=`<div class="yBoxImgZoom">${o}<img src="${n}" alt="" class="yBoxImg" /></div>`,i=t.getAttribute("data-ybox-group");i&&document.querySelector(`.yBox[data-ybox-group="${i}"]`)&&(r=`<button type="button" class="yBoxNextImg" title="Next"></button>${r}<button type="button" class="yBoxPrevImg" title="Prev"></button>`),c.innerHTML=r,window.screen.width<=150&&zoom({zoom:"yBoxImgZoom"}),document.querySelector(".yBoxNextImg").addEventListener("click",function(){e.yBoxNextItem(t)}),document.querySelector(".yBoxPrevImg").addEventListener("click",function(){e.yBoxPrevItem(t)})}}else{let t=document.querySelector(n),o=a||document.createRange().createContextualFragment('<div class="yBoxPlaceHolder"></div>');t.parentNode.insertBefore(o,t.nextSibling);let r=document.createElement("div");r.className="yBoxInnerHtmlDiv",r.innerHTML=t.innerHTML,c.appendChild(r),e.init()}else c.innerHTML=r;i&&i()},this.yBoxNextItem=function(t){let o,n=t.getAttribute("data-ybox-group"),r=!1,i=document.querySelectorAll(`.yBox[data-ybox-group=${n}]:not(.splide__slide--clone .yBox[data-ybox-group=${n}])`);for(let e=0;e<i.length;e++){let n=i[e];r||n.getAttribute("href")==t.getAttribute("href")&&(r=!0,o=e+1<i.length?i[e+1]:i[0])}o&&(o.click(),e.onNextItemClick())},this.yBoxPrevItem=function(t){let o,n=t.getAttribute("data-ybox-group"),r=!1,i=document.querySelectorAll(`.yBox[data-ybox-group=${n}]:not(.splide__slide--clone .yBox[data-ybox-group=${n}])`);for(let e=0;e<i.length;e++){let n=i[e];r||n.getAttribute("href")==t.getAttribute("href")&&(console.log(e+" -> "+i.length),r=!0,e-1>=0?(o=i[e-1],console.log("if : "+e+" - "+o)):(o=i[i.length-1],console.log("else : "+e+" - "+o)))}o&&(o.click(),e.onPrevItemClick())},this.closeYbox=function(){let t=document.querySelector(".yBoxOverlay"),o=document.querySelector(".insertYboxAjaxHere"),n=document.querySelector(".yBoxPlaceHolder");t.classList.remove("active"),setTimeout(function(){n&&n.parentNode&&(n.appendChild(document.createRange().createContextualFragment(o.innerHTML)),n.parentNode.removeChild(n)),t&&t.parentNode&&t.parentNode.removeChild(t),e.onYboxClose(),document.body.removeEventListener("keyup",function(t){e.onKeyup(t)})},600)},this.helpers={animate:function(e,t,o,n,r){e.style.transition=`all ${n}s`,e.style[t]=`${o}`,setTimeout(()=>{e.style.transition="initial",r&&r()},1e3*n)}}}

  window.onload = function(){
    let myYbox;
  if(document.querySelector('.yBox')){
    myYbox = new yBox();
    myYbox.init();
  }
  myYbox.onYboxOpen = function(){
    document.body.classList.add('yBoxIsOpen');
  }
  myYbox.onYboxClose = function(){
    document.body.classList.remove('yBoxIsOpen');
  }
  myYbox.onNextItemClick = function(){
    console.log('next item clicked');
  };
  myYbox.onPrevItemClick = function(){
    console.log('prev item clicked');
  }
  };
  /* End yBox Popup */